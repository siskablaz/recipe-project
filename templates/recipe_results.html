{% extends 'base.html' %}
{% block title %}Recipe Results{% endblock %}

{% block body %}
  <h1>All recipes</h1>

  <ul>
    {% for recipe in recipes %}
   
      <li>
        <a href="/recipes/{{ recipe.recipe_id }}">
          {{ recipe.title }}
        </a>
      <div><img src="{{recipe.image}}"/></div>
      <div>Ready time: {{recipe.ready_minutes}}</div>
      <div>Missed Ingredient Count : {{recipe.missed_ingredient_count}}</div>
      <div>Missed Ingredients:</div>
      {% for ingredient in recipe.missed_ingredients %}
        {% if ingredient in currShopList %}
        <div> <button onClick = "addShoppingList('{{ingredient}}', event)" name="shop-button" id="shop-{{ingredient}}" value="{{ingredient}}" class="favoritesBtn btn btn-primary mt-2">-  {{ingredient}}</button></div>
        {% endif %}
        {% if ingredient not in currShopList %}
        <div> <button onClick = "addShoppingList('{{ingredient}}', event)" name="shop-button" id="shop-{{ingredient}}" value="{{ingredient}}" class="favoritesBtn btn btn-primary mt-2">+ {{ingredient}}</button></div>
        {% endif %}
        {% endfor%}

        {% if recipe.recipe_id in currFavRecipes %}
        <button onClick = "addFavorite('{{recipe.recipe_id}}', 'results_page', event)" title="Save to favorites" name="fav-button"  value="res-fav-{{recipe.recipe_id}}" class="favResultsBtn btn btn-primary mt-2" id="res-fav-{{recipe.recipe_id}}">❤️ {{recipe.fav_recipes|length}}</button>
        {% endif %}
        {% if recipe.recipe_id not in currFavRecipes %}
        <button onClick = "addFavorite('{{recipe.recipe_id}}', 'results_page', event)" title="Save to favorites" name="fav-button"  value="res-fav-{{recipe.recipe_id}}" class="favResultsBtn btn btn-primary mt-2" id="res-fav-{{recipe.recipe_id}}">♡ {{recipe.fav_recipes|length}}</button>
        {% endif %}
      

        </li>
 
    {% endfor %}

  </ul>

  <script src="/static/display_recipes.js"></script>
{% endblock %}


